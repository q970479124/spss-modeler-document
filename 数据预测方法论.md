## 一、数据准备阶段 （3-5天） ##
1. 明确业务目标与问题定义：
   - 确认预测目标：素子数
   - 确认预测业务对象：电容型号为03ENA和15XAW_GP
   - 确认数据量：以上两个型号各自的数据量且是否为3年内的数据
   - 确认以上两个型号各种的人工目前能够达到的指标：例如ΔC在2%以内
   - 确认以上两个型号各种的预期目标指标：例如ΔC降低20%

2. 数据收集与整合
   - 使用CP4D中的连接数据源节点，连接客户数据库
   - 使用CP4D中的准备数据及将其可视化(data Refinery)节点，编写sql分别取得03ENA与15XAW_GP的数据并可视化，后查看`探索性数据分析报告`
   - 使用spss modeler的导入 - 数据资产节点导入创建好的数据资产
   - 使用spss modeler的字段操作 - 类型节点自动创建数据中字段类型
   - 使用spss modeler的输出 - 数据审计节点创建并查看`数据审计报告`

3. 数据清洗（缺失值、异常值、重复值处理）
   - 通过查看`数据审计报告`或者`探索性数据分析报告`初步查看数据缺失、异常、重复、分布、字段名称等情况
   - 结合业务对以上两种型号进行字段筛选，使用spss modeler字段操作中的过滤节点筛选掉不使用的字段
   - 使用spss modeler字段操作中的填充、派生、过滤节点处理缺失值和异常值
   - 使用spss modeler记录操作中的选择、排序、总汇、合并节点处理重复值、缺失值和异常值
   - 使用spss modeler输出 - 表/数据审计节点查看处理后的数据报告

4. 特征命名规范化
   - 适当判断字段是否需要额外重新进行命名规范化

<br>

## 二、数据探索与理解 （7-10天） ##
1. 描述性统计分析
   - 通过分析`探索性数据分析报告`或`数据审计报告`确定数据质量（例如缺失情况、最大/最小值、标准差、熵等信息）
   - 通过以上操作确认数据分布及数据质量、初步确认数据清洗内容

2. 可视化探索（分布图、箱线图等）
   - `探索性数据分析报告`的可视化功能查看直方图和Q-Q图确认每个数据的数据分布情况，是否符合正态分布以及异常值。
   - `探索性数据分析报告`的可视化功能查看箱线图确认每个数据的数据分布情况以及异常值，重点在于异常值分析。

3. 变量间相关性分析
   - 通过`探索性数据分析报告`中的数据质量查看皮尔逊相关性等指标确认数据间相关性
   - 通过`探索性数据分析报告`的可视化功能查看散点图等确认数据分布、数据走向、异常值和峰值

4. 异常点与离群值检测
   - 通过以上步骤对数据的整合，确认出异常值和离群值的范围、极值的范围等
   - 通过以上分析结构处理异常值、离群值、极值、缺失值等情况

5. 变量重要性初步筛查
   - 通过随机森林等树模型进行初步预测，并得出字段的特征重要性分析结构

<br>

## 三、特征工程 （7-10天） ##
1. 特征选择（过滤法、包裹法、嵌入法）
   - 首先采用过滤法：通过Pearson 相关系数初步筛选出高相关性特征，以及对极高相关性特征的删除和合并
   - 采用嵌入法：通过模型初步跑出数据重要性，保留高重要性数据和组合特征(参考`变量重要性初步筛查`)
   - 采用包裹法：使用模型进行递归验证和训练，不断追加或删除特征验证模型效果，多轮训练后总结出效果最佳的特征

2. 特征构造（组合特征、统计特征等）
   - 通过以上分析以及业务的分析构建新特征

3. 特征编码（One-Hot、Label Encoding 等）
   - 对字符型或有规律、有业务分类的连续型/分类型数据进行独热编码或标签编码
   - 注：树模型可以不做转换

4. 特征缩放（标准化、归一化等）
   - 使用spss modeler 字段操作 - 派生/填充/重新分类节点进行标准化和归一化转换
   - 注：树模型可以不做转换

5. 降维处理（PCA、LDA、ICA 等）
   - 使用spss modeler 建模 - PCA节点进行特征降维处理

6. 特征重要性评估与优化
   - 使用树模型重新验证特征重要性评估
   - 以上1-6步骤不按顺序，交叉多轮处理，选择出效果最好的特征组合

<br>

## 四、建模准备 （5-7天） ##
1. 数据划分（训练集、验证集、测试集）
   - 使用spss modeler字段操作 - 分区节点将数据分为训练集和测试集(一般为7-3或8-2)
   - 使用spss modeler建模 - 自动分类器节点进行交叉验证

2. 模型选择
   - 回归类模型选择：采用多个模型进行多组训练和验证，筛选出效果最好的一组模型(按照对数据状况的分析优先采用梯度提升模型确认模型精准度是否达标)

3. 定义评价指标
   - R²
   - RMSE
   - MAPE
   - ΔC
   - 通过上述指标确认模型精度，R²和RMSE作为模型训练时的评判标准，MAPE和ΔC作为测试和验证的评价指标
   - 通过spss modeler 输出-分析节点和生成的模型结果查看预测结果分布状况

<br>

## 五、模型训练与评估 （5-7天） ##
1. 基础模型训练
   - 采用人工预测特征进行模型训练
   - 采用以上筛选出的特征进行模型训练

2. 参数调优
   - 树模型使用时采用超参数优化调整模型训练效果

3. 模型性能对比与筛选
   - 筛选出综合效果最佳的模型

4. 使用测试集/验证集评估性能
   - 通过spss modeler生成的模型查看模型结果
   - RMSE / MAPE / R² / ΔC 等指标计算
   - 误差分析：查看正态分布状况分析导致误差的原因
   - 多轮验证模型稳定性和鲁棒性(可能放在陪跑的模型运行阶段)

<br>

## 六、模型部署与监控 （3-5天） ##
1. 模型导出与上线（API、批处理、嵌入系统）
   - 在spss modeler 模型中导出模型并部署在CP4D中
   - 构建API及可视化画面调用部署后的模型

2. 性能监控（漂移检测、精度监控）
   - 模型上线运行阶段持续检测模型性能和精度
