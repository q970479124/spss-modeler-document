## 缺失值的补充方式 ##

> 在数据存在缺失值时总体缺失率不能超过15%~20%
> 原因是如果对缺失值进行补充时，补充值不准确，可能对模型产生噪声，或者删除或补充时造成数据分布不均
> 整体分析要分类为`目标特征`、`核心特征`、`次要特征`、`弱相关特征`、`无关特征`
> - 目标特征：不允许出现缺失值
> - 核心特征：缺失值要小于5%
> - 次要特征：缺失值要小于15%
> - 弱相关特征：缺失值小于30%
> - 无关特征：可以完全缺失

<br>

> 注意：尽量不要出现整条数据多列缺失的情况。处理前和处理后的数据都需要保留  
> 由于初期无法判断如何分类特征，因此首先要保证整体数据缺失值不能超过15%~20%，且不要出现大量整条数据多列缺失的情况  
> 对于可以之间删除的缺失值可以忽略  
> 补充和删除时，然后确认数据分布，比如最大值和最小值，如果要删除的行数据中存在接近最大值和最小值的数据或数据量极少的数据，这时不能进行删除处理（还需要确认是否存在重复行，重复行对数据量的影响）  
> 补充值尽量避免极值  
> 如果整条多列缺失的话主要以删除方式为主，缺失率较高时也以删除为主  

**如果补充值较多的场合就不能追求过于严苛的精度（例如1%）**  
**为尽量避免以上情况首先按照型号将数据分类，保证某些数据缺失较少的型号的精度**  
**如果除核心和目标维度以外缺失较多时可先采用核心维度训练模型评估效果**  

<br>

- 直接删除
  1. 核心特征缺失则删除，次要特征缺失可保留
  2. 先处理异常值，再删除缺失行
  3. 确保不丢失关键样本
  4. 确保缺失是随机缺失的不能存在有原因的缺失（例如超过阈值不记录）
  5. 时间序列数据需要注意数据连续性
 
- 插值填充
  1. 均值填充：用该字段的平均值替代缺失值。 **适用场景** ：连续型数据、分布较稳定
  2. 中位数填充：用字段的中位数代替缺失值。 **适用场景** ：存在极端值时更稳健
  3. 众数填充：用出现频率最高的值填补。 **适用场景** ：分类变量或离散数值
  4. 常数填充：用固定值（如 0、-999、"未知"）表示缺失。 **适用场景** ：希望保留`缺失`含义
  5. 分组均值填充：先按某分组计算均值，再按组内均值填补。 **适用场景** ：例如按地区、部门补充缺失薪资
  6. 前向填充：用上一个非缺失值填充当前缺失值。 **适用场景** ：时间序列、设备传感器数据连续丢帧等
  7. 后向填充：用下一个非缺失值替代缺失值。 **适用场景** ：类似于前向填充，但向后看
  8. 线性插值：根据缺失值前后的两个点，进行线性插补。 **适用场景** ：数值型时间序列，例如温度、压力、传感器信号
  9. 按照业务进行插值，例如业务上同批次使用的薄膜必须相同，因此当同批次中出现部分薄膜数据缺失时，填充相同薄膜值即可，且准确。
 
- 模型补充
  但不建议使用模型补充，因为使用成本较高且准确率不稳定
  1. 把缺失值作为预测目标
  2. 使用模型`多重插补（MICE）`,`XGBoost/LightGBM`,`KNN 插补`
  3. 需要其他列作为辅助
  4. 回归预测填充：
     - 通过其他变量预测缺失值
     - 适用场景：字段之间存在较强相关性
     - 用 自动数据准备建立模型预测缺失项，再用预测结果字段替换原字段中缺失值。
  5. 最近邻填充（KNN）
     - 使用相似记录（k 个邻居）的平均值填充缺失项
     - 适用场景：非线性数据、复杂特征空间
     - 使用 SPSS Modeler 的KNN 节点
     - 算法逻辑为：找出与缺失样本最近的 k 条记录，用这些记录中对应字段的均值或众数填充。
 
